<!DOCTYPE html>
  <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <link rel="stylesheet" href="main.css">
    <script type="text/javascript">
    	// Keyboard control
    	// used a jsfiddle to figure this out: http://jsfiddle.net/3n2hc8mu/
	    var isKeyDown = false;

		$(function(){
		    $('html').keydown(function(e){
		        if (e.which == 38 && !isKeyDown) {
		            isKeyDown = true;
		            // console.log('up');
		            $('#up').addClass('active');
		            $.get( 'http://missile-attack:8080/up');
		        } else if (e.which == 40 && !isKeyDown) {
		            isKeyDown = true;
		            // console.log('down');
		            $('#down').addClass('active');
		            $.get( 'http://missile-attack:8080/down');
		        } else if (e.which == 37 && !isKeyDown) {
		            isKeyDown = true;
		            // console.log('left');
		            $('#left').addClass('active');
		            $.get( 'http://missile-attack:8080/left');
		        } else if (e.which == 39 && !isKeyDown) {
		            isKeyDown = true;
		            // console.log('right');
		            $('#right').addClass('active');
		            $.get( 'http://missile-attack:8080/right');
		        } else if (e.which == 32 && !isKeyDown) {
		            isKeyDown = true;
		            $('#fire').addClass('active');
		            // console.log('space');
		            $.get( 'http://missile-attack:8080/fire/1');     
		        } else if (e.which == 13 && !isKeyDown) {
		            isKeyDown = true;
		            // console.log('enter');
		            $('#zero').addClass('active');
		            $.get( 'http://missile-attack:8080/zero');     
		        }
		    });
		
		    $('html').keyup(function(e){
		        if ((e.which == 38) || (e.which == 40) || (e.which == 37) || (e.which == 39) || (e.which == 32) || (e.which == 13)) {
		            // console.log("KEY UP!!!!");
		            isKeyDown = false;   
		            $('#up').removeClass('active');
		            $('#down').removeClass('active');
		            $('#right').removeClass('active');
		            $('#left').removeClass('active');
		            $('#zero').removeClass('active');
		            $('#fire').removeClass('active');
		            $.get( 'http://missile-attack:8080/stop');
		        }
		    });
		});
    </script>
  </head>
  <body>
      <h2>Client Demo</h2>
      <p>jQuery.get() is used to fire a get request to the api on http://missile-attack:8080</p>
      <p>You can also use arrow keys and space and enter for controlling the missile launcher.</p>
      <ul>
        <li onclick="$.get( 'http://missile-attack:8080/right/500');">go right 500 ms</li>
        <li onclick="$.get( 'http://missile-attack:8080/left/500');">go left 500 ms</li>
        <li onclick="$.get( 'http://missile-attack:8080/up/500');">go up 500 ms</li>
        <li onclick="$.get( 'http://missile-attack:8080/down/500');">go down 500 ms</li>
        <li id="zero" onclick="$.get( 'http://missile-attack:8080/zero/1');">go to zero</li>
        <li id="fire" onclick="$.get( 'http://missile-attack:8080/fire/1');">FIRE!</li>
      </ul>
      
      <p>for continuous movement press and hold the mouse button.</p>
      
      <ul>
        <li id="right" onmousedown="$.get( 'http://missile-attack:8080/right');" onmouseup="$.get( 'http://missile-attack:8080/stop');">continous right</li>
        <li id="left" onmousedown="$.get( 'http://missile-attack:8080/left');" onmouseup="$.get( 'http://missile-attack:8080/stop');">continous left</li>
        <li id="up" onmousedown="$.get( 'http://missile-attack:8080/up');" onmouseup="$.get( 'http://missile-attack:8080/stop');">continous up</li>
        <li id="down" onmousedown="$.get( 'http://missile-attack:8080/down');" onmouseup="$.get( 'http://missile-attack:8080/stop');">continous down</li>
        <li id="stop" onmousedown="$.get( 'http://missile-attack:8080/stop');" onmouseup="$.get( 'http://missile-attack:8080/stop');">emergency stop</li>
      </ul>
  </body>
</html>